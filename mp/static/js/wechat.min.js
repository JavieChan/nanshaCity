function Request(){this.protocol="http",this.host="10.20.1.34",this.port="9092",this.version="v0"}function wechatRequest(){Request.call(this)}Request.prototype._send=function(a,b,c,d,e){var f=this.protocol+"://"+this.host+":"+this.port+b;$.ajax({method:a,url:f,dataType:"json",data:c}).done(function(a){console.log(a),200==parseInt(a.code)?$.isFunction(d)&&d(a):$.isFunction(e)?e(a):alert(a.reason)}).fail(function(a){console.log(a),alert("[请求失败]系统繁忙")})},Request.prototype._post=function(a,b,c,d){this._send("post",a,b,c,d)},Request.prototype._get=function(a,b,c,d){this._send("get",a,b,c,d)},Request.prototype._put=function(a,b,c,d){this._send("put",a,b,c,d)},Request.prototype._delete=function(a,b,c,d){this._send("delete",a,b,c,d)},wechatRequest.prototype=new Request,wechatRequest.prototype.getWxpromote=function(a){this._get("/wxpromote","",function(b){a(b)})},wechatRequest.prototype.pustWxpromote=function(a,b,c,d,e,f){var g={wechat_id:a,nickname:b,account:c,password:d,image_url:e};this._post("/wxpromote",JSON.stringify(g),function(a){f(a)})},wechatRequest.prototype.putWxpromote=function(a,b,c,d,e,f,g){var h={id:a,wechat_id:b,nickname:c,account:d,password:e,image_url:f};this._put("/wxpromote",JSON.stringify(h),function(a){g(a)})},wechatRequest.prototype.deleteWxpromote=function(a,b){var c={wechat_id:a};this._delete("/wxpromote",JSON.stringify(c),function(a){b(a)})},wechatRequest.prototype.deleteWxpromotes=function(a,b){var c={wechat_id_list:a};this._delete("/wxpromote/bulk-delete",JSON.stringify(c),function(a){b(a)})},wechatRequest.prototype.getUsingWxpromote=function(a){this._get("/wxpromote/promoting","",function(b){a(b)})},wechatRequest.prototype.usingWxpromote=function(a,b){var c={wechat_id:a};this._post("/wxpromote/promoting",JSON.stringify(c),function(a){b(a)})},$(function(){$("#changeWechatBtn").on("click",function(){console.log(2),$("#modalChangeWechat").modal("open")})});var renderList={template:'<tr>        <td><input type="checkbox" class="wechat-checkbox" /></td>        <td>{{ promote.wechat_id }}</td>        <td>{{ promote.nickname }}</td>        <td>{{ promote.account }}</td>        <td>{{ promote.password }}</td>        <td><img :src="promote.image_uri" /></td>        <td><span class="edit">编辑</span><span class="use" v-show="!promote.status">应用</span><span class="using" v-show="promote.status">已用</span><span class="delete">删除</span></td>    </tr>',props:["promote"],data:function(){return{}},methods:{}},wcr=new wechatRequest,vm=new Vue({el:"#promote",data:{haspromote:!1,using:{wechatId:"fulijun",nickname:"福利君",account:"18897654321",password:"woshimima",qrcode:"/static/images/QRcode.jpg"},promoteList:[]},components:{"render-list":renderList},mounted:function(){var a=this;a.getUsingPromote(),a.getPromotes()},methods:{getUsingPromote:function(){var a=this;wcr.getUsingWxpromote(function(b){if(b.wechat.length>0){var c=b.wechat;a.haspromote=!0,a.using={wechatId:c.wechat_id,nickname:c.nickname,account:c.account,password:c.password,qrcode:c.image_url}}})},getPromotes:function(){var a=this;wcr.getWxpromote(function(b){a.promoteList=b.wechat_list})}}});