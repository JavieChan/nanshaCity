function Request(){this.protocol="http",this.host="test.bidongwifi.com",this.port="80",this.version="v0"}function redeemCode(){Request.call(this)}Vue.component("paginator",{template:'<div class="paginator">            <button type="button" class="btnWhiteSmall" v-on:click="pagePrev">上一页</button>            <span>{{ page }}</span> / <span>{{ total }}</span>            <button type="button" class="btnWhiteSmall" v-on:click="pageNext">下一页</button>            <input type="text"  v-model="jump" style="width:60px" placeholder="1" />            <button type="button" class="btnWhiteSmall" v-on:click="pageJump" style="width:60px">跳转</button>        </div>',props:["currentPage","totalPage","jumpPage"],data:function(){return{page:this.currentPage,total:this.totalPage,jump:this.jumpPage}},watch:{currentPage:function(a,b){this.page=a},totalPage:function(a,b){this.total=a},jumpPage:function(a,b){this.jump=a}},methods:{pagePrev:function(){return this.page-=1,this.page<1?(this.page=1,!1):void this.$emit("page-change",this.page)},pageNext:function(){return this.page+=1,this.page>this.total?(this.page=this.total,!1):void this.$emit("page-change",this.page)},pageJump:function(){this.jump>=1&&this.jump<=this.total&&(this.page=this.jump,this.$emit("page-change",this.page))}}}),Request.prototype._send=function(a,b,c,d,e){var f=b;$.ajax({method:a,url:f,dataType:"json",data:c}).done(function(a){console.log(a),200==parseInt(a.code)?$.isFunction(d)&&d(a):$.isFunction(e)?e(a):alert(a.reason)}).fail(function(a){alert("[请求失败]系统繁忙")})},Request.prototype._post=function(a,b,c,d){this._send("post",a,b,c,d)},Request.prototype._get=function(a,b,c,d){this._send("get",a,b,c,d)},redeemCode.prototype=new Request,redeemCode.prototype.createSerial=function(a,b,c,d){var e={count:a,hours:b,expired:c};this._post("/redeemcode/creation",JSON.stringify(e),function(a){d(a)})},redeemCode.prototype.generateCodes=function(a,b,c){var d={serial:a,page:b};this._get("/redeemcode/creation",d,function(a){c(a)})},redeemCode.prototype.getCodeList=function(a,b,c){var d={status:a,page:b};this._get("/redeemcode/list",d,function(a){c(a)})},redeemCode.prototype.getOperatorAndList=function(a,b,c,d,e){var f={start:a,end:b,operator:c,page:d};this._get("/redeemcode/operator",f,function(a){e(a)})},$(function(){$("#start").datepicker({dateFormat:"yy-mm-dd",onClose:function(a){$("#end").datepicker("option","minDate",a),vm.start=a}}),$("#end").datepicker({dateFormat:"yy-mm-dd",onClose:function(a){$("#start").datepicker("option","maxDate",a),vm.end=a}})});var renderList={template:"<tr><td>{{ code.operator }}</td><td>{{ code.total }}</td><td>{{ code.used }}</td><td>{{ code.usable }}</td><td>{{ code.expired }}</td></tr>",props:["code"]},ree=new redeemCode,vm=new Vue({el:"#redeemcodetotal",data:{start:GetDateStr(-1),end:GetDateStr(1),operator:"",operatorOptions:[{text:"全部",value:""}],codeList:[],currentPage:1,totalPage:1,jumpPage:""},components:{"render-list":renderList},computed:{totalStart:function(){return this.start+" 00:00:00"},totalEnd:function(){return this.end+" 23:59:59"},total:function(){var a=this,b=0;return a.codeList.length>0&&$.each(a.codeList,function(a,c){b+=c.total}),b},used:function(){var a=this,b=0;return a.codeList.length>0&&$.each(a.codeList,function(a,c){b+=c.used}),b},usable:function(){var a=this,b=0;return a.codeList.length>0&&$.each(a.codeList,function(a,c){b+=c.usable}),b},expired:function(){var a=this,b=0;return a.codeList.length>0&&$.each(a.codeList,function(a,c){b+=c.expired}),b}},mounted:function(){var a=this;ree.getOperatorAndList(a.totalStart,a.totalEnd,a.operator,1,function(b){a.currentPage=b.table_payload.current_page,a.totalPage=b.table_payload.total_pages,a.codeList=b.table_payload.datas,$.each(b.operators,function(b,c){var d={text:c,value:c};a.operatorOptions.push(d)})})},methods:{changeFilter:function(){var a=this;a.pageChange(1),a.jumpPage=""},pageChange:function(a){var b=this;ree.getOperatorAndList(b.totalStart,b.totalEnd,b.operator,a,function(a){b.currentPage=a.table_payload.current_page,b.totalPage=a.table_payload.total_pages,b.codeList=a.table_payload.datas})}}});